"use strict";(self.webpackChunksinag_project=self.webpackChunksinag_project||[]).push([[758],{3758:function(e,s,a){a.r(s);var n=a(885),c=a(2791),t=(a(5636),a(1968)),i=a.n(t),r=a(8014),l=a(6355),d=a(4373),o=a(1578),h=a(7692),u=a(9126),m=a(71),v=a(184);function x(e,s){s.setHumidityValue;var a=(0,c.useState)(!1),t=(0,n.Z)(a,2),x=t[0],p=t[1],j=(0,c.useState)(null),N=(0,n.Z)(j,2),w=(N[0],N[1]),f=e.selectedSL,g=e.sameDate,S=e.allData,_=(0,c.useState)("-"),T=(0,n.Z)(_,2),D=T[0],Z=T[1],F=(0,c.useState)("-"),b=(0,n.Z)(F,2),y=b[0],C=b[1],E=(0,c.useState)("-"),I=(0,n.Z)(E,2),L=I[0],k=I[1],O=(0,c.useState)("-"),Y=(0,n.Z)(O,2),M=Y[0],V=Y[1],W=(0,c.useState)(0),A=(0,n.Z)(W,2),G=A[0],H=A[1],P=(0,c.useState)(0),q=(0,n.Z)(P,2),B=q[0],K=q[1];(0,c.useEffect)((function(){U()}),[]),(0,c.useEffect)((function(){z(),J()}),[S]);var U=function(){console.log("Fetching Weather Data");try{p(!0),fetch("https://api.openweathermap.org/data/2.5/weather?lat=14.4506&lon=120.9828&appid=a09978101e59b60cb76ea444b36760cc&units=metric").then((function(e){return e.json()})).then((function(e){Z($(e.sys.sunrise)),C($(e.sys.sunset)),k(e.main.temp),V(e.weather[0].description)})).catch((function(e){return w(e)})).finally(p(!1))}catch(e){console.error(e)}};function $(e){return new Date(1e3*e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}var z=function(){var e=S.reduce((function(e,s,a,n){if(1===s.charging){var c=n[a+1];if(c&&c.date===s.date&&0===c.charging){var t=new Date(s.date).toISOString().split("T")[0],i=new Date("".concat(t,"T").concat(s.time,":00Z"));console.log(i);var r=(new Date("".concat(t,"T").concat(c.time,":00Z"))-i)/36e5,l=e.find((function(e){return e.date===s.date}));l?l.charging_time+=r:e.push({date:s.date,charging_time:r})}}return e}),[]);console.table(e);var s=e.reduce((function(e,s){return e+s.charging_time}),0)/e.length;console.log(s),H(parseFloat(s).toFixed(2))},J=function(){var e=S.reduce((function(e,s,a,n){if(1===s.led_status){var c=n[a+1];if(c&&c.date===s.date&&1===c.led_status){var t=new Date(s.date).toISOString().split("T")[0],i=new Date("".concat(t,"T").concat(s.time,":00Z")),r=(new Date("".concat(t,"T").concat(c.time,":00Z"))-i)/36e5,l=e.find((function(e){return e.date===s.date}));l?l.on_time+=r:e.push({date:s.date,on_time:r})}if(c&&c.date===s.date&&0===c.led_status){var d=new Date(s.date).toISOString().split("T")[0],o=new Date("".concat(d,"T").concat(s.time,":00Z")),h=(new Date("".concat(d,"T").concat(c.time,":00Z"))-o)/36e5,u=e.find((function(e){return e.date===s.date}));u?u.on_time+=h:e.push({date:s.date,on_time:h})}}return e}),[]);console.table(e);var s=e.reduce((function(e,s){return e+s.on_time}),0)/e.length;console.log(s),K(parseFloat(s).toFixed(2))};return(0,v.jsxs)("div",{className:"overview-container",children:[x?(0,v.jsx)(i(),{type:"spokes",color:"#0f1b2a",height:550,width:375,className:"loading-api"}):"",(0,v.jsx)("div",{className:"",children:(0,v.jsx)("h3",{className:"my-0",children:"System Overview"})}),(0,v.jsxs)("div",{className:"overview-container-wrapper",children:[(0,v.jsxs)("div",{className:"sl-overview-container",children:[(0,v.jsxs)("div",{className:"sl-wrapper mb-3",children:[(0,v.jsx)("div",{className:"sl-overview-card",children:(0,v.jsxs)("div",{className:"card-content",children:[(0,v.jsx)(l.f38,{className:"sl-icon"}),(0,v.jsxs)("h3",{children:[function(){var e=0;return g.forEach((function(s){e+=s.pv_power})),parseFloat(.16667*e).toFixed(2)}(),"Wh"]}),(0,v.jsx)("p",{children:"Current Yield"})]})}),(0,v.jsx)("div",{className:"sl-overview-card",children:(0,v.jsxs)("div",{className:"card-content",children:[(0,v.jsx)(r.FMY,{className:"sl-icon"}),(0,v.jsxs)("h3",{children:[function(){var e=S.reduce((function(e,s){var a=e.find((function(e){return e.date===s.date}));return a?a.gen_power+=.16667*parseFloat(s.pv_power):e.push({date:s.date,gen_power:.16667*s.pv_power}),e}),[]).reduce((function(e,s){return Math.max(e,s.gen_power)}),Number.NEGATIVE_INFINITY);return parseFloat(e).toFixed(2)}(),"Wh"]}),(0,v.jsx)("p",{children:"Highest Yield"})]})}),(0,v.jsx)("div",{className:"sl-overview-card",children:(0,v.jsxs)("div",{className:"card-content",children:[(0,v.jsx)(l.rV$,{className:"sl-icon"}),(0,v.jsx)("h3",{children:f.battCapacity}),(0,v.jsx)("p",{children:"Battery Capacity"})]})})]}),(0,v.jsxs)("div",{className:"sl-wrapper",children:[(0,v.jsx)("div",{className:"sl-overview-card",children:(0,v.jsxs)("div",{className:"card-content",children:[(0,v.jsx)(m.WEr,{className:"sl-icon"}),(0,v.jsxs)("h3",{children:[G,"hr"]}),(0,v.jsx)("p",{children:"Avg. Charging Time"})]})}),(0,v.jsx)("div",{className:"sl-overview-card",children:(0,v.jsxs)("div",{className:"card-content",children:[(0,v.jsx)(o.PnF,{className:"sl-icon"}),(0,v.jsxs)("h3",{children:[B,"hr"]}),(0,v.jsx)("p",{children:"Avg. ON Time"})]})}),(0,v.jsx)("div",{className:"sl-overview-card",children:(0,v.jsxs)("div",{className:"card-content",children:[(0,v.jsx)(d.oV2,{className:"sl-icon"}),(0,v.jsx)("h3",{children:f.lamp}),(0,v.jsx)("p",{children:"LED Lamp"})]})})]})]}),(0,v.jsxs)("div",{className:"sl-temp-container",children:[(0,v.jsxs)("div",{className:"sl-wrapper",children:[(0,v.jsxs)("div",{className:"weather-wrapper",children:[(0,v.jsx)("div",{className:"icon-wrapper",children:(0,v.jsx)(h.weT,{className:"weather-icon"})}),(0,v.jsxs)("div",{className:"temp-container",children:[(0,v.jsxs)("h2",{className:"temp-value",children:[L,"\xb0C"]}),(0,v.jsx)("h2",{className:"device-title",children:"Las Pi\xf1as, PH"}),(0,v.jsx)("h6",{children:(0,v.jsx)("i",{children:M})})]})]}),(0,v.jsxs)("div",{className:"weather-container",children:[(0,v.jsxs)("div",{className:"content-container sunrise-container",children:[(0,v.jsx)("div",{className:"content-wrap",children:(0,v.jsx)("div",{className:"icon-wrapper",children:(0,v.jsx)(u.YKx,{className:"s-icon"})})}),(0,v.jsxs)("div",{className:"content-wrap",children:[(0,v.jsx)("h2",{className:"sunrise-value",children:D}),(0,v.jsx)("h6",{children:"(GMT+8)"}),(0,v.jsx)("p",{children:"Sunrise"})]})]}),(0,v.jsxs)("div",{className:"content-container sunset-container",children:[(0,v.jsx)("div",{className:"content-wrap",children:(0,v.jsx)("div",{className:"icon-wrapper",children:(0,v.jsx)(u.qud,{className:"s-icon"})})}),(0,v.jsxs)("div",{className:"content-wrap",children:[(0,v.jsx)("h2",{className:"sunset-value",children:y}),(0,v.jsx)("h6",{children:"(GMT+8)"}),(0,v.jsx)("p",{children:"Sunset"})]})]})]})]}),(0,v.jsx)("div",{className:"dv-container",children:(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"device-title",children:"Location"}),(0,v.jsx)("p",{className:"location-txt",children:f.location})]})})]})]})]})}s.default=(0,c.memo)(x)}}]);
//# sourceMappingURL=758.3ecc4d44.chunk.js.map