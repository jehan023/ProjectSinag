{"version":3,"file":"static/js/758.8e56731b.chunk.js","mappings":"8NAWA,SAASA,EAASC,EAAM,GAAmB,EAAhBC,iBAAqB,IAC9C,GAA8BC,EAAAA,EAAAA,WAAS,GAAM,eAAtCC,EAAO,KAAEC,EAAU,KAC1B,GAA0BF,EAAAA,EAAAA,UAAS,MAAK,eAA1BG,GAAF,KAAU,MAEhBC,EAAON,EAAMO,WACbC,EAAeR,EAAMS,SAC3B,GAA8BP,EAAAA,EAAAA,UAAS,KAAI,eAApCQ,EAAO,KAAEC,EAAU,KAC1B,GAA4BT,EAAAA,EAAAA,UAAS,KAAI,eAAlCU,EAAM,KAAEC,EAAS,KACxB,GAAwBX,EAAAA,EAAAA,UAAS,KAAI,eAA9BY,EAAI,KAAEC,EAAO,KACpB,GAA8Bb,EAAAA,EAAAA,UAAS,KAAI,eAApCc,EAAO,KAAEC,EAAU,MAS1BC,EAAAA,EAAAA,YAAU,WACRC,GACF,GAAG,IAEH,IAAMA,EAAiB,WACrBC,QAAQC,IAAI,yBACZ,IACEjB,GAAW,GACXkB,MAAM,gIACHC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAM,IAChCF,MAAK,SAAAjB,GAEJK,EAAWe,EAAgBpB,EAAKqB,IAAIjB,UACpCG,EAAUa,EAAgBpB,EAAKqB,IAAIf,SACnCG,EAAQT,EAAKsB,KAAKd,MAClBG,EAAWX,EAAc,QAAE,GAAgB,YAC7C,IACCuB,OAAM,SAAAC,GAAK,OAAIzB,EAASyB,EAAM,IAC9BC,QAAQ3B,GAAW,GAGxB,CAFE,MAAO0B,GACPV,QAAQU,MAAMA,EAChB,CACF,EAEA,SAASJ,EAAgBM,GAGvB,OAFa,IAAIC,KAAiB,IAAZD,GACKE,mBAAmB,QAAS,CAAEC,KAAM,UAAWC,OAAQ,WAEpF,CAaA,OACE,iBAAKC,UAAU,qBAAoB,UAChClC,GAAU,SAAC,IAAY,CAACmC,KAAM,SAAUC,MAAO,UAAWC,OAAQ,IAAKC,MAAO,IAAKJ,UAAU,gBAAmB,IACjH,gBAAKA,UAAU,iCAAgC,UAC7C,eAAIA,UAAU,OAAM,SAAC,uBAIvB,iBAAKA,UAAU,iCAAgC,WAE7C,iBAAKA,UAAU,mBAAkB,WAC/B,iBAAKA,UAAU,oBAAmB,WAChC,iBAAKA,UAAU,6CAA4C,WACzD,SAAC,MAAY,CAACA,UAAU,yBACxB,iBAAKA,UAAU,QAAO,WACpB,0BA1BS,WACrB,IACIK,EADAC,EAAS,EAOb,OALAnC,EAAaoC,SAAQ,SAAAC,GACnBF,GAAkBE,EAAKC,QACzB,IACAJ,EAAwB,OAATC,EACfvB,QAAQC,IAAI,WAAaqB,GACjBK,WAAWL,GAAaM,QAAQ,EAC1C,CAiBmBC,GAAiB,SACtB,uBAAG,mBACH,0BAAK,EAAK,SACV,uBAAG,yBAEP,iBAAKZ,UAAU,6CAA4C,WACzD,SAAC,MAAO,CAACA,UAAU,wBACnB,iBAAKA,UAAU,QAAO,WACpB,0BAAK,EAAK,SACV,uBAAG,yBACH,0BAAK,EAAK,SACV,uBAAG,kCAIT,iBAAKA,UAAU,oBAAmB,WAChC,iBAAKA,UAAU,6CAA4C,WACzD,SAAC,MAAY,CAACA,UAAU,yBACxB,iBAAKA,UAAU,QAAO,WACpB,wBAAK/B,EAAK4C,gBACV,uBAAG,4BAGP,iBAAKb,UAAU,6CAA4C,WACzD,SAAC,MAAM,CAACA,UAAU,yBAClB,iBAAKA,UAAU,QAAO,WACpB,wBAAK/B,EAAK6C,QACV,uBAAG,uBAMT,iBAAKd,UAAU,kEAAiE,WAC9E,iBAAKA,UAAU,uBAAsB,WACnC,gBAAIA,UAAU,OAAM,UAAEvB,EAAK,YAC3B,yBAAI,uBAAIE,OACR,uBArGK,yBAuGP,iBAAKqB,UAAU,uBAAsB,WACnC,eAAIA,UAAU,OAAM,SAAE3B,KACtB,wBAAI,aACJ,uBAAG,gBAEL,iBAAK2B,UAAU,sBAAqB,WAClC,eAAIA,UAAU,OAAM,SAAEzB,KACtB,wBAAI,aACJ,uBAAG,qBAOT,iBAAKyB,UAAU,iBAAgB,WAC7B,4BACE,eAAIA,UAAU,OAAM,SAAC,aACrB,gBAAKA,UAAU,eAAc,SAvHvB,CACd,CAAEe,KAAM,MAAOC,MAAO,MAAOC,MAAO,iBACpC,CAAEF,KAAM,MAAOC,MAAO,MAAOC,MAAO,iBACpC,CAAEF,KAAM,MAAOC,MAAO,MAAOC,MAAO,kBAqHjBC,KAAI,SAACC,GAAM,OAClB,iBAAKnB,UAAU,4CAA2C,WACxD,gBAAKA,UAAU,YAAW,SAAC,SAC3B,yBAAImB,EAAOF,MAAM,KAAGE,EAAOJ,KAAK,SAF8BI,EAAOH,MAGjE,UAIZ,4BACE,eAAIhB,UAAU,OAAM,SAAC,oBACrB,gBAAKA,UAAU,uBAAsB,SAAC,cAIxC,4BACE,eAAIA,UAAU,OAAM,SAAC,cACrB,cAAGA,UAAU,OAAM,SAAE/B,EAAKmD,sBAOtC,CAEA,WAAeC,EAAAA,EAAAA,MAAK3D,E","sources":["components/overview.js"],"sourcesContent":["import React, { useState, memo, useEffect } from 'react';\r\nimport '../App.scss';\r\nimport axios from 'axios';\r\nimport ReactLoading from 'react-loading';\r\n\r\nimport { GiSolarPower } from \"react-icons/gi\";\r\nimport { FaCarBattery } from \"react-icons/fa\";\r\nimport { ImPower } from \"react-icons/im\";\r\nimport { TbBulb } from \"react-icons/tb\";\r\n\r\n\r\nfunction Overview(props, { setHumidityValue }) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const data = props.selectedSL;\r\n  const sameDateData = props.sameDate;\r\n  const [sunrise, setSunrise] = useState('-');\r\n  const [sunset, setSunset] = useState('-');\r\n  const [temp, setTemp] = useState('-');\r\n  const [weather, setWeather] = useState('-');\r\n  const location = 'Las Piñas, PH';\r\n\r\n  const devices = [\r\n    { list: 'SL1', value: 'SL1', label: 'Streetlight 1' },\r\n    { list: 'SL2', value: 'SL2', label: 'Streetlight 2' },\r\n    { list: 'SL3', value: 'SL3', label: 'Streetlight 3' },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    callWeatherAPI();\r\n  }, []);\r\n\r\n  const callWeatherAPI = () => {\r\n    console.log('Fetching Weather Data');\r\n    try {\r\n      setLoading(true);\r\n      fetch(`https://api.openweathermap.org/data/2.5/weather?lat=14.4506&lon=120.9828&appid=a09978101e59b60cb76ea444b36760cc&units=metric`)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          // setFetchWeather(data);\r\n          setSunrise(formatTimestamp(data.sys.sunrise));\r\n          setSunset(formatTimestamp(data.sys.sunset));\r\n          setTemp(data.main.temp);\r\n          setWeather(data['weather'][0]['description']);\r\n        })\r\n        .catch(error => setError(error))\r\n        .finally(setLoading(false));\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  function formatTimestamp(timestamp) {\r\n    const date = new Date(timestamp * 1000);\r\n    const formattedTime = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\r\n    return formattedTime;\r\n  }\r\n\r\n  const GetEnergyYield = () => {\r\n    let energy = 0.0;\r\n    let totalEnergy = 0.0;\r\n    sameDateData.forEach(same => {\r\n      energy = energy + same.pv_power;\r\n    });\r\n    totalEnergy = (energy * 0.16667);\r\n    console.log(\"Energy: \" + totalEnergy);\r\n    return (parseFloat(totalEnergy).toFixed(2));\r\n  }\r\n\r\n  return (\r\n    <div className='overview-container'>\r\n      {loading ? <ReactLoading type={'spokes'} color={'#0f1b2a'} height={550} width={375} className='loading-api' /> : ''}\r\n      <div className='d-flex align-items-center my-0'>\r\n        <h3 className='my-0'>System Overview</h3>\r\n        {/* <input type='text' onChange={() => callWeatherAPI}>Fetch Weather</input> */}\r\n      </div>\r\n\r\n      <div className='d-flex justify-content-between'>\r\n        {/** Left side of the screen section*/}\r\n        <div className='sl-overview py-3'>\r\n          <div className='d-flex gap-5 mb-3'>\r\n            <div className='sl-overview-card d-flex align-items-center'>\r\n              <GiSolarPower className='overview-icon w-100' />\r\n              <div className='w-100'>\r\n                <h3>{GetEnergyYield()}Wh</h3>\r\n                <p>Current Yield</p>\r\n                <h3>{0.00}Wh</h3>\r\n                <p>Highest Yield</p></div>\r\n            </div>\r\n            <div className='sl-overview-card d-flex align-items-center'>\r\n              <ImPower className='overview-icon w-50' />\r\n              <div className='w-100'>\r\n                <h3>{0.00}Wh</h3>\r\n                <p>Current Consumption</p>\r\n                <h3>{0.00}Wh</h3>\r\n                <p>Highest Consumption</p></div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className='d-flex gap-5 mb-3'>\r\n            <div className='sl-overview-card d-flex align-items-center'>\r\n              <FaCarBattery className='overview-icon w-100' />\r\n              <div className='w-100'>\r\n                <h2>{data.battCapacity}</h2>\r\n                <p>Battery Capacity</p>\r\n              </div>\r\n            </div>\r\n            <div className='sl-overview-card d-flex align-items-center'>\r\n              <TbBulb className='overview-icon w-100' />\r\n              <div className='w-100'>\r\n                <h2>{data.lamp}</h2>\r\n                <p>LED Lamp</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/** Details for temp and time section*/}\r\n          <div className='temp-time d-flex justify-content-between align-items-center p-3'>\r\n            <div className='current-temp tt-item'>\r\n              <h2 className='mb-1'>{temp}°C</h2>\r\n              <h6><i>{weather}</i></h6>\r\n              <p>{location}</p>\r\n            </div>\r\n            <div className='sunrise-time tt-item'>\r\n              <h2 className='mb-1'>{sunrise}</h2>\r\n              <h6>(GMT+8)</h6>\r\n              <p>Sunrise</p>\r\n            </div>\r\n            <div className='sunset-time tt-item'>\r\n              <h2 className='mb-1'>{sunset}</h2>\r\n              <h6>(GMT+8)</h6>\r\n              <p>Sunset</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/** Right side of the screen section*/}\r\n\r\n        <div className='sl-devices p-3'>\r\n          <div>\r\n            <h2 className='mb-3'>Devices</h2>\r\n            <div className='devices-list'>\r\n              {devices.map((option) => (\r\n                <div className='d-flex align-items-center gap-2 mb-1 mx-3' key={option.value}>\r\n                  <div className='sl-status'> - </div>\r\n                  <p>{option.label} ({option.list})</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h2 className='my-3'>Energy Balance</h2>\r\n            <div className='energy-balance-chart'>\r\n              chart\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h2 className='my-3'>Location</h2>\r\n            <p className='mn-3'>{data.location}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(Overview);"],"names":["Overview","props","setHumidityValue","useState","loading","setLoading","setError","data","selectedSL","sameDateData","sameDate","sunrise","setSunrise","sunset","setSunset","temp","setTemp","weather","setWeather","useEffect","callWeatherAPI","console","log","fetch","then","response","json","formatTimestamp","sys","main","catch","error","finally","timestamp","Date","toLocaleTimeString","hour","minute","className","type","color","height","width","totalEnergy","energy","forEach","same","pv_power","parseFloat","toFixed","GetEnergyYield","battCapacity","lamp","list","value","label","map","option","location","memo"],"sourceRoot":""}