"use strict";(self.webpackChunksinag_project=self.webpackChunksinag_project||[]).push([[703],{2703:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var a=n(885),r=n(2791),o=n(9513),i=n.n(o),c=(n(8639),n(6355)),s=n(429),l=n(4819),u=n(184);l.kL.register(l.f$,l.uw,l.ZL,l.od,l.jn,l.De,l.u,l.Gu,l.ST,l.vn,s.ZP);l.kL.register(l.uw,l.f$,l.ZL,l.Dx,l.u,l.De,s.ZP);var d=n(2982),p=n(3623);l.kL.register(l.f$,l.uw,l.ZL,l.od,l.jn,l.De,l.u,l.Gu,l.ST,l.vn,s.ZP);var y=function(e){var t=e.data,n=e.viewMode,o=(0,r.useState)([]),i=(0,a.Z)(o,2),c=i[0],s=i[1],l=(0,r.useState)([]),y=(0,a.Z)(l,2),m=y[0],b=y[1],f=(0,r.useState)([]),h=(0,a.Z)(f,2),g=h[0],v=h[1],x=(0,r.useState)([]),Z=(0,a.Z)(x,2),k=Z[0],w=Z[1];(0,r.useEffect)((function(){try{switch(s([]),b([]),v([]),w([]),n){case"day":t.map((function(e){b((function(t){return[].concat((0,d.Z)(t),[e.batt_level])})),s((function(t){return[].concat((0,d.Z)(t),[e.time])})),v((function(t){return[].concat((0,d.Z)(t),[e.led_status])})),w((function(t){return[].concat((0,d.Z)(t),[e.charging])}))}));break;case"month":t.reduce((function(e,t){var n=e.find((function(e){return e.date===t.date}));return n?n.level=Math.max(n.level,parseFloat(t.batt_level)):e.push({date:t.date,level:t.batt_level}),e}),[]).map((function(e){b((function(t){return[].concat((0,d.Z)(t),[e.level])})),s((function(t){return[].concat((0,d.Z)(t),[e.date])}))}));break;case"year":for(var e=["January","February","March","April","May","June","July","August","September","October","November","December"],r={},o={},i=0;i<t.length;i++){var c=t[i].date.split(" "),l=e.indexOf(c[0]),u=c[2],p="".concat(e[l],"-").concat(u),y=t[i].batt_level;r[p]?(r[p]+=y,o[p]++):(r[p]=y,o[p]=1)}var m=[];for(var f in r){var h=f.split("-"),g=(0,a.Z)(h,2),x=g[0],Z=(g[1],e.indexOf(x)+1),k=r[f]/o[f];m.push({month:e[Z-1],level:k})}m.map((function(e){b((function(t){return[].concat((0,d.Z)(t),[e.level])})),s((function(t){return[].concat((0,d.Z)(t),[e.month])}))}));break;default:return}}catch(j){}}),[t,n]);var j={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},scales:{x:{type:"category",ticks:{maxRotation:0,autoSkipPadding:50}},y2:{type:"linear",position:"left",min:0,max:100},y1:{type:"linear",offset:!0,position:"right",min:0,max:1,ticks:{stepSize:1}}},plugins:{legend:{position:"right",display:!0,labels:{filter:function(e,t){return"day"===n||"Lamp"!==e.text&&"Charging"!==e.text}}},title:{display:!0,text:"day"===n?"Battery Level, Charging & LED Status":"Average Battery Level",font:{size:24}},zoom:{pan:{enabled:!0,mode:"x"},zoom:{pinch:{enabled:!0},wheel:{enabled:!0},mode:"x"}},clip:{left:25,right:25}}},S={labels:c,datasets:[{type:"line",label:"Lamp",data:g,backgroundColor:"rgb(243, 156, 18, 0.8)",borderColor:"rgb(243, 156, 18, 0.8)",yAxisID:"y1",stepped:!0,order:1},{type:"line",label:"Charging",data:k,backgroundColor:"rgba(28, 164, 63, 0.8)",borderColor:"rgba(28, 164, 63, 0.8)",yAxisID:"y1",stepped:!0,order:1},{type:"day"===n?"line":"bar",label:"Level (%)",data:m,backgroundColor:"rgba(9, 15, 30, 0.8)",borderColor:"rgba(9, 15, 30, 0.8)",yAxisID:"y2",order:2,fill:!0}]};return(0,u.jsx)(p.kL,{options:j,data:S})};l.kL.register(l.f$,l.uw,l.ZL,l.od,l.jn,l.De,l.u,l.Gu,l.ST,l.vn,s.ZP);var m=function(e){var t=e.data,n=e.viewMode,o=(0,r.useState)([]),i=(0,a.Z)(o,2),c=i[0],s=i[1],l=(0,r.useState)([]),y=(0,a.Z)(l,2),m=y[0],b=y[1],f=(0,r.useState)([]),h=(0,a.Z)(f,2),g=h[0],v=h[1],x=(0,r.useState)([]),Z=(0,a.Z)(x,2),k=Z[0],w=Z[1];(0,r.useEffect)((function(){try{switch(s([]),b([]),v([]),w([]),n){case"day":t.map((function(e){s((function(t){return[].concat((0,d.Z)(t),[e.time])})),b((function(t){return[].concat((0,d.Z)(t),[e.pv_power])})),v((function(t){return[].concat((0,d.Z)(t),[e.temp])})),w((function(t){return[].concat((0,d.Z)(t),[e.lux])}))}));break;case"month":t.reduce((function(e,t){var n=e.find((function(e){return e.date===t.date}));return n?(n.sys_power+=.08333*parseFloat(t.pv_power),n.sys_temp+=parseFloat(t.temp),n.sys_lux+=parseFloat(t.lux),n.count+=1):e.push({date:t.date,sys_power:.08333*t.pv_power,sys_temp:t.temp,sys_lux:t.lux,count:1}),e}),[]).map((function(e){s((function(t){return[].concat((0,d.Z)(t),[e.date])})),b((function(t){return[].concat((0,d.Z)(t),[e.sys_power])})),v((function(t){return[].concat((0,d.Z)(t),[e.sys_temp/e.count])})),w((function(t){return[].concat((0,d.Z)(t),[e.sys_lux/e.count])}))}));break;case"year":for(var e=["January","February","March","April","May","June","July","August","September","October","November","December"],r={},o={},i={},c={},l=0;l<t.length;l++){var u=t[l].date.split(" "),p=e.indexOf(u[0]),y=u[2],m="".concat(e[p],"-").concat(y),f=t[l].pv_power,h=t[l].temp,g=t[l].lux;r[m]?(r[m]+=f,o[m]+=h,i[m]+=g,c[m]++):(r[m]=f,o[m]=h,i[m]=g,c[m]=1)}var x=[];for(var Z in r){var k=Z.split("-"),j=(0,a.Z)(k,2),S=j[0],C=(j[1],e.indexOf(S)+1),D=r[Z]/c[Z],N=o[Z]/c[Z],_=i[Z]/c[Z];x.push({month:e[C-1],generate:D,temp:N,lux:_})}x.map((function(e){b((function(t){return[].concat((0,d.Z)(t),[e.generate])})),v((function(t){return[].concat((0,d.Z)(t),[e.temp])})),w((function(t){return[].concat((0,d.Z)(t),[e.lux])})),s((function(t){return[].concat((0,d.Z)(t),[e.month])}))}));break;default:return}}catch(L){}}),[t,n]);var j={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{position:"right"},title:{display:!0,text:"day"===n?"Solar Panel's Production":"Average Solar Panel's Production",font:{size:24}},zoom:{pan:{enabled:!0,mode:"x"},zoom:{pinch:{enabled:!0},wheel:{enabled:!0},mode:"x"}}},scales:{x:{type:"category",ticks:{maxRotation:0,autoSkipPadding:50}},y:{type:"linear",position:"right"},y1:{type:"linear",position:"left"}}},S={labels:c,datasets:[{type:"line",label:"Temperature (\xb0C)",backgroundColor:"rgb(4, 59, 92, 1)",data:g,borderColor:"rgb(4, 59, 92, 1)",yAxisID:"y1"},{type:"line",label:"Ambient Light (lux)",backgroundColor:"rgb(22, 160, 133, 1)",data:k,borderColor:"rgb(22, 160, 133, 1)",yAxisID:"y"},{type:"day"===n?"line":"bar",label:"day"===n?"Power (W)":"Energy (Wh)",data:m,backgroundColor:"rgb(207, 0, 15, 1)",borderColor:"rgb(207, 0, 15, 1)",yAxisID:"y1"}]};return(0,u.jsx)(p.kL,{options:j,data:S})};function b(e){var t=(0,r.useState)(new Date),n=(0,a.Z)(t,2),o=n[0],s=n[1],l=(0,r.useState)(!1),d=(0,a.Z)(l,2),p=d[0],b=d[1],f=new Date(2022,10,1),h=(0,r.useState)("day"),g=(0,a.Z)(h,2),v=g[0],x=g[1],Z=(0,r.useState)({month:"long",day:"numeric",year:"numeric"}),k=(0,a.Z)(Z,2),w=k[0],j=k[1],S=function(e){e.value;var t=e.onClick;return(0,u.jsx)(c.IiJ,{className:"date-picker-icon",onClick:t})},C=function(e){x(e),j("month"===e?{month:"long",year:"numeric"}:"year"===e?{year:"numeric"}:{month:"long",day:"numeric",year:"numeric"})},D=w,N=o.toLocaleDateString("en-US",D),_=e.data.filter((function(e){var t=new Date(e.date),n=t.getMonth(),a=t.getDate(),r=t.getFullYear(),o=new Date(N),i=o.getMonth(),c=o.getDate(),s=o.getFullYear();switch(v){case"day":default:return n===i&&a===c&&r===s;case"month":return n===i&&r===s;case"year":return r===s}}));return(0,u.jsxs)("div",{className:"analysis-container",children:[(0,u.jsx)("div",{className:"d-flex align-items-center my-0",children:(0,u.jsx)("h3",{className:"my-0",children:"System Analysis"})}),(0,u.jsxs)("div",{className:"d-flex align-items-center",children:[(0,u.jsx)("div",{className:"analysis-date-picker w-50 py-1",children:(0,u.jsxs)("div",{className:"date-picker-container d-flex justify-content-start align-items-center gap-2",children:[(0,u.jsx)(S,{onClick:function(){b(!p)}}),(0,u.jsx)("h6",{className:"my-0",children:N})]})}),"     ",(0,u.jsxs)("div",{className:"analysis-date-type w-100 d-flex justify-content-end gap-2",children:[(0,u.jsx)("button",{className:"day"===v?"btn date-type-btn-active btn date-type-btn":"btn date-type-btn",onClick:function(){return C("day")},children:"Day"}),(0,u.jsx)("button",{className:"month"===v?"btn date-type-btn-active btn date-type-btn":"btn date-type-btn",onClick:function(){return C("month")},children:"Month"}),(0,u.jsx)("button",{className:"year"===v?"btn date-type-btn-active btn date-type-btn":"btn date-type-btn",onClick:function(){return C("year")},children:"Year"})]})]}),p&&(0,u.jsx)("div",{className:"calendar-container",children:(0,u.jsx)(i(),{selected:o,onChange:function(e){s(e),b(!1)},showMonthYearPicker:"month"===v,showYearPicker:"year"===v,customInput:(0,u.jsx)(u.Fragment,{}),popperPlacement:"top-start",inline:!0,minDate:f,maxDate:new Date})}),(0,u.jsxs)("div",{className:"analysis-section mt-3",children:[(0,u.jsx)("div",{className:"chart mb-4",children:(0,u.jsx)(m,{data:_,viewMode:v,className:"chart"})}),(0,u.jsx)("div",{className:"chart",children:(0,u.jsx)(y,{data:_,viewMode:v,className:"chart"})})]})]})}var f=(0,r.memo)(b)}}]);
//# sourceMappingURL=703.fe9e5a62.chunk.js.map