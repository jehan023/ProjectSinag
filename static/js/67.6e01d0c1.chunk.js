"use strict";(self.webpackChunksinag_project=self.webpackChunksinag_project||[]).push([[67],{6067:function(s,a,t){t.r(a);var e=t(885),c=t(2791),n=t(6355),r=t(9126),i=t(1578),l=t(5585),d=t(71),h=t(4373),o=t(6856),u=t(184);function x(s){var a=s.data,t=s.sameDate,x=a.batt_level,j=(0,c.useState)(""),m=(0,e.Z)(j,2),N=m[0],p=m[1],g=(0,c.useState)("-"),v=(0,e.Z)(g,2),f=v[0],F=v[1];(0,c.useEffect)((function(){y()}),[a]);var y=function(){console.log("Fetching Weather Data");try{fetch("https://api.openweathermap.org/data/2.5/weather?lat=14.4506&lon=120.9828&appid=a09978101e59b60cb76ea444b36760cc&units=metric").then((function(s){return s.json()})).then((function(s){F(s.main.humidity)})).catch((function(s){return console.log(s)}))}catch(s){console.error(s)}},S=function(){return 1===a.charging?(p("status-card battFull"),(0,u.jsx)(d.WEr,{className:"status-icon"})):x>=76?(p("status-card battFull"),(0,u.jsx)(n.Lr7,{className:"status-icon"})):x>=51&&x<=75?(p("status-card battSafe"),(0,u.jsx)(n.Oj0,{className:"status-icon"})):x>=26&&x<=50?(p("status-card battMid"),(0,u.jsx)(n._ET,{className:"status-icon"})):x>=1&&x<=25?(p("status-card battDanger"),(0,u.jsx)(n.yN4,{className:"status-icon"})):(p("status-card battDanger"),(0,u.jsx)(n.Ftr,{className:"status-icon"}))},b=function(){return 1===parseFloat(a.led_status)?(0,u.jsxs)("div",{className:"status-card lampON",children:[(0,u.jsx)(i.PnF,{className:"status-icon"}),(0,u.jsx)("h2",{children:"ON"}),(0,u.jsx)("h5",{children:"LED Lamp"})]}):0===parseFloat(a.led_status)?(0,u.jsxs)("div",{className:"status-card lampOFF",children:[(0,u.jsx)(i.mYP,{className:"status-icon"}),(0,u.jsx)("h2",{children:"OFF"}),(0,u.jsx)("h5",{children:"LED Lamp"})]}):void 0},w=new Date,L=w.getHours(),_=w.getMinutes(),D=a.time.split(":").map(Number),C=(0,e.Z)(D,2),E=60*(L-C[0])+(_-C[1]),O=Math.floor(E/60),W=E%60,A=" hr ",T=" min ";A=O>1?" hrs ":" hr ",T=W>1?" mins ago.":" min ago.";var Y=function(){var s="Inactive";return w.toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric"})===a.date&&(a.pv_power>0||1===a.charging||1===a.led_status)&&(s="Active"),(0,u.jsxs)("div",{className:"d-flex align-items-center gap-2 my-2",children:[(0,u.jsx)("div",{className:"Active"===s?"sl-status sl-active":"sl-status sl-inactive",children:" - "}),w.toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric"})===a.date?E>60?(0,u.jsx)("h6",{className:"my-0",children:s+" | Last update "+O+A+W+T}):(0,u.jsx)("h6",{className:"my-0",children:s+" | Last update "+E+T}):(0,u.jsx)("h6",{className:"my-0",children:s+" | Last update "+a.date})]})},k=function(){var s;switch(parseFloat(a.rssi)>-115&&(parseFloat(a.snr)>-7&&(s="Good"),parseFloat(a.snr)<=-13&&(s="Noisy environment")),parseFloat(a.rssi)<=-120&&(parseFloat(a.snr)>-7&&(s="Too far away"),parseFloat(a.snr)<=-13&&(s="Bad")),parseFloat(a.rssi)<-115&&parseFloat(a.rssi)>-120&&(s="Fair"),s){case"Bad":return(0,u.jsxs)("div",{className:"status-card signal-bad",children:[(0,u.jsx)(o.eCv,{className:"status-icon"}),(0,u.jsx)("h6",{children:(0,u.jsx)("i",{children:s})}),(0,u.jsx)("h5",{children:"Signal Strength"})]});case"Fair":return(0,u.jsxs)("div",{className:"status-card signal-fair",children:[(0,u.jsx)(o.RCz,{className:"status-icon"}),(0,u.jsx)("h6",{children:(0,u.jsx)("i",{children:s})}),(0,u.jsx)("h5",{children:"Signal Strength"})]});case"Good":return(0,u.jsxs)("div",{className:"status-card signal-good",children:[(0,u.jsx)(o.eOu,{className:"status-icon"}),(0,u.jsx)("h6",{children:(0,u.jsx)("i",{children:s})}),(0,u.jsx)("h5",{children:"Signal Strength"})]});case"Noisy environment":return(0,u.jsxs)("div",{className:"status-card signal-noisy",children:[(0,u.jsx)(o.tn2,{className:"status-icon"}),(0,u.jsx)("h6",{children:(0,u.jsx)("i",{children:s})}),(0,u.jsx)("h5",{children:"Signal Strength"})]});case"Too far away":return(0,u.jsxs)("div",{className:"status-card signal-far",children:[(0,u.jsx)(o.WVq,{className:"status-icon"}),(0,u.jsx)("h6",{children:(0,u.jsx)("i",{children:s})}),(0,u.jsx)("h5",{children:"Signal Strength"})]});default:return}},M=function(){var s,t;return parseFloat(a.lux)>=32e3?(s="Direct Sunlight",t=(0,u.jsx)(h.J8Y,{className:"status-icon"})):parseFloat(a.lux)>=1e4?(s="Ambient Sunlight",t=(0,u.jsx)(l.Rq0,{className:"status-icon"})):parseFloat(a.lux)>=1e3?(s="Overcast Sunlight",t=(0,u.jsx)(l.GW5,{className:"status-icon"})):parseFloat(a.lux)>=400?(s="Twilight",t=(0,u.jsx)(o.X2p,{className:"status-icon"})):parseFloat(a.lux)>=1?(s="Moonlight",t=(0,u.jsx)(r.gLD,{className:"status-icon"})):parseFloat(a.lux)<1&&(s="Night",t=(0,u.jsx)(d.KYd,{className:"status-icon"})),(0,u.jsxs)("div",{className:"status-card",children:[t,(0,u.jsx)("h6",{children:(0,u.jsx)("i",{children:s})}),(0,u.jsx)("h5",{children:"Ambient Light"})]})};return(0,u.jsxs)("div",{className:"status-container",children:[(0,u.jsx)("div",{className:"d-flex align-items-center my-0",children:(0,u.jsx)("h3",{className:"my-0",children:"System Status"})}),(0,u.jsx)(Y,{}),(0,u.jsx)("div",{className:"status-section",children:(0,u.jsxs)("div",{className:"status-cards-container",children:[(0,u.jsxs)("div",{className:"cards-row d-flex justify-content-center gap-4 my-4",children:[(0,u.jsxs)("div",{className:"status-card",children:[(0,u.jsx)(n.f38,{className:"status-icon"}),(0,u.jsxs)("h2",{children:[parseFloat(a.pv_power),"W"]}),(0,u.jsx)("h5",{children:"Current Power"})]}),(0,u.jsxs)("div",{className:"status-card",children:[(0,u.jsx)(r.XLv,{className:"status-icon"}),(0,u.jsxs)("h2",{children:[function(){var s=0;return t.forEach((function(a){s+=a.pv_power})),parseFloat(.16667*s).toFixed(2)}(),"Wh"]}),(0,u.jsx)("h5",{children:"Energy Yield"})]}),(0,u.jsxs)("div",{className:N,children:[(0,u.jsx)(S,{}),(0,u.jsxs)("h2",{children:[x,"%"]}),(0,u.jsx)("h5",{children:"Battery"})]}),(0,u.jsx)(b,{})]}),(0,u.jsxs)("div",{className:"cards-row d-flex justify-content-between gap-4",children:[(0,u.jsxs)("div",{className:"status-card",children:[(0,u.jsx)(r.jYF,{className:"status-icon"}),(0,u.jsxs)("h2",{children:[parseFloat(a.temp),"\xb0C"]}),(0,u.jsx)("h5",{children:"Ambient Temperature"})]}),(0,u.jsxs)("div",{className:"status-card",children:[(0,u.jsx)(l.$2C,{className:"status-icon"}),(0,u.jsxs)("h2",{children:[f,"%"]}),(0,u.jsx)("h5",{children:"Humidity"})]}),(0,u.jsx)(M,{}),(0,u.jsx)(k,{})]})]})})]})}a.default=(0,c.memo)(x)}}]);
//# sourceMappingURL=67.6e01d0c1.chunk.js.map