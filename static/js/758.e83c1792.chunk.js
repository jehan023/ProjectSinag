"use strict";(self.webpackChunksinag_project=self.webpackChunksinag_project||[]).push([[758],{3758:function(e,s,a){a.r(s);var n=a(885),t=a(2791),c=(a(5636),a(1968)),i=a.n(c),r=a(8014),l=a(6355),d=a(4373),o=a(1578),h=a(7692),u=a(9126),v=a(71),m=a(184);function x(e,s){s.setHumidityValue;var a=(0,t.useState)(!1),c=(0,n.Z)(a,2),x=c[0],p=c[1],j=(0,t.useState)(null),N=(0,n.Z)(j,2),w=(N[0],N[1]),f=e.selectedSL,g=e.sameDate,_=e.allData,S=(0,t.useState)("-"),T=(0,n.Z)(S,2),D=T[0],Z=T[1],F=(0,t.useState)("-"),b=(0,n.Z)(F,2),y=b[0],C=b[1],E=(0,t.useState)("-"),I=(0,n.Z)(E,2),L=I[0],k=I[1],O=(0,t.useState)("-"),Y=(0,n.Z)(O,2),M=Y[0],V=Y[1],W=(0,t.useState)(0),A=(0,n.Z)(W,2),G=A[0],H=A[1],P=(0,t.useState)(0),q=(0,n.Z)(P,2),B=q[0],K=q[1];(0,t.useEffect)((function(){U()}),[]),(0,t.useEffect)((function(){z(),J()}),[_]);var U=function(){console.log("Fetching Weather Data");try{p(!0),fetch("https://api.openweathermap.org/data/2.5/weather?lat=14.4506&lon=120.9828&appid=a09978101e59b60cb76ea444b36760cc&units=metric").then((function(e){return e.json()})).then((function(e){Z($(e.sys.sunrise)),C($(e.sys.sunset)),k(e.main.temp),V(e.weather[0].description)})).catch((function(e){return w(e)})).finally(p(!1))}catch(e){console.error(e)}};function $(e){return new Date(1e3*e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}var z=function(){var e=_.reduce((function(e,s,a,n){if(1===s.charging){var t=n[a+1];if(t&&t.date===s.date&&0===t.charging){var c=new Date(s.date).toISOString().split("T")[0],i=new Date("".concat(c,"T").concat(s.time,":00Z")),r=(new Date("".concat(c,"T").concat(t.time,":00Z"))-i)/36e5,l=e.find((function(e){return e.date===s.date}));l?l.charging_time+=r:e.push({date:s.date,charging_time:r})}}return e}),[]);console.table(e);var s=e.reduce((function(e,s){return e+s.charging_time}),0)/e.length;console.log(s),H(parseFloat(s).toFixed(2))},J=function(){var e=_.reduce((function(e,s,a,n){if(1===s.led_status){var t=n[a+1];if(t&&t.date===s.date&&(1===t.led_status||0===t.led_status)){var c=new Date(s.date).toISOString().split("T")[0],i=new Date("".concat(c,"T").concat(s.time,":00Z")),r=(new Date("".concat(c,"T").concat(t.time,":00Z"))-i)/36e5;0===t.led_status&&(r-=1/60);var l=e.find((function(e){return e.date===s.date}));l?l.on_time+=r:e.push({date:s.date,on_time:r})}if(t&&t.date!==s.date&&(1===t.led_status||0===t.led_status)){var d=new Date(s.date).toISOString().split("T")[0],o=new Date("".concat(d,"T").concat(s.time,":00Z")),h=(new Date("".concat(d,"T23:59:59Z"))-o)/36e5;0===t.led_status&&(h-=1/60);var u=e.find((function(e){return e.date===s.date}));u?u.on_time+=h:e.push({date:s.date,on_time:h})}}return e}),[]);console.table(e);var s=e.reduce((function(e,s){return e+s.on_time}),0)/e.length;console.log(s),K(parseFloat(s).toFixed(2))};return(0,m.jsxs)("div",{className:"overview-container",children:[x?(0,m.jsx)(i(),{type:"spokes",color:"#0f1b2a",height:550,width:375,className:"loading-api"}):"",(0,m.jsx)("div",{className:"",children:(0,m.jsx)("h3",{className:"my-0",children:"System Overview"})}),(0,m.jsxs)("div",{className:"overview-container-wrapper",children:[(0,m.jsxs)("div",{className:"sl-overview-container",children:[(0,m.jsxs)("div",{className:"sl-wrapper mb-3",children:[(0,m.jsx)("div",{className:"sl-overview-card",children:(0,m.jsxs)("div",{className:"card-content",children:[(0,m.jsx)(l.f38,{className:"sl-icon"}),(0,m.jsxs)("h3",{children:[function(){var e=0;return g.forEach((function(s){e+=s.pv_power})),parseFloat(.08333*e).toFixed(2)}(),"Wh"]}),(0,m.jsx)("p",{children:"Current Yield"})]})}),(0,m.jsx)("div",{className:"sl-overview-card",children:(0,m.jsxs)("div",{className:"card-content",children:[(0,m.jsx)(r.FMY,{className:"sl-icon"}),(0,m.jsxs)("h3",{children:[function(){var e=_.reduce((function(e,s){var a=e.find((function(e){return e.date===s.date}));return a?a.gen_power+=.08333*parseFloat(s.pv_power):e.push({date:s.date,gen_power:.08333*s.pv_power}),e}),[]).reduce((function(e,s){return Math.max(e,s.gen_power)}),Number.NEGATIVE_INFINITY);return parseFloat(e).toFixed(2)}(),"Wh"]}),(0,m.jsx)("p",{children:"Highest Yield"})]})}),(0,m.jsx)("div",{className:"sl-overview-card",children:(0,m.jsxs)("div",{className:"card-content",children:[(0,m.jsx)(l.rV$,{className:"sl-icon"}),(0,m.jsx)("h3",{children:f.battCapacity}),(0,m.jsx)("p",{children:"Battery Capacity"})]})})]}),(0,m.jsxs)("div",{className:"sl-wrapper",children:[(0,m.jsx)("div",{className:"sl-overview-card",children:(0,m.jsxs)("div",{className:"card-content",children:[(0,m.jsx)(v.WEr,{className:"sl-icon"}),(0,m.jsxs)("h3",{children:[G,"hr"]}),(0,m.jsx)("p",{children:"Avg. Charging Time"})]})}),(0,m.jsx)("div",{className:"sl-overview-card",children:(0,m.jsxs)("div",{className:"card-content",children:[(0,m.jsx)(o.PnF,{className:"sl-icon"}),(0,m.jsxs)("h3",{children:[B,"hr"]}),(0,m.jsx)("p",{children:"Avg. ON Time"})]})}),(0,m.jsx)("div",{className:"sl-overview-card",children:(0,m.jsxs)("div",{className:"card-content",children:[(0,m.jsx)(d.oV2,{className:"sl-icon"}),(0,m.jsx)("h3",{children:f.lamp}),(0,m.jsx)("p",{children:"LED Lamp"})]})})]})]}),(0,m.jsxs)("div",{className:"sl-temp-container",children:[(0,m.jsxs)("div",{className:"sl-wrapper",children:[(0,m.jsxs)("div",{className:"weather-wrapper",children:[(0,m.jsx)("div",{className:"icon-wrapper",children:(0,m.jsx)(h.weT,{className:"weather-icon"})}),(0,m.jsxs)("div",{className:"temp-container",children:[(0,m.jsxs)("h2",{className:"temp-value",children:[L,"\xb0C"]}),(0,m.jsx)("h2",{className:"device-title",children:"Las Pi\xf1as, PH"}),(0,m.jsx)("h6",{children:(0,m.jsx)("i",{children:M})})]})]}),(0,m.jsxs)("div",{className:"weather-container",children:[(0,m.jsxs)("div",{className:"overview-content-container sunrise-container",children:[(0,m.jsx)("div",{className:"content-wrap",children:(0,m.jsx)("div",{className:"icon-wrapper",children:(0,m.jsx)(u.YKx,{className:"s-icon"})})}),(0,m.jsxs)("div",{className:"content-wrap",children:[(0,m.jsx)("h2",{className:"sunrise-value",children:D}),(0,m.jsx)("h6",{children:"(GMT+8)"}),(0,m.jsx)("p",{children:"Sunrise"})]})]}),(0,m.jsxs)("div",{className:"overview-content-container sunset-container",children:[(0,m.jsx)("div",{className:"content-wrap",children:(0,m.jsx)("div",{className:"icon-wrapper",children:(0,m.jsx)(u.qud,{className:"s-icon"})})}),(0,m.jsxs)("div",{className:"content-wrap",children:[(0,m.jsx)("h2",{className:"sunset-value",children:y}),(0,m.jsx)("h6",{children:"(GMT+8)"}),(0,m.jsx)("p",{children:"Sunset"})]})]})]})]}),(0,m.jsx)("div",{className:"dv-container",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{className:"device-title",children:"Location"}),(0,m.jsx)("p",{className:"location-txt",children:f.location})]})})]})]})]})}s.default=(0,t.memo)(x)}}]);
//# sourceMappingURL=758.e83c1792.chunk.js.map