"use strict";(self.webpackChunksinag_project=self.webpackChunksinag_project||[]).push([[67],{6067:function(s,a,e){e.r(a);var t=e(885),c=e(2791),n=e(6355),i=e(9126),r=e(1578),l=e(5585),d=e(8014),h=e(184);function o(s){console.log("Status:",s.data);var a=s.data,e=s.sameDate,o=a.batt_level,u=(0,c.useState)(""),m=(0,t.Z)(u,2),j=m[0],x=m[1],N=(0,c.useState)("-"),p=(0,t.Z)(N,2),v=p[0],g=p[1];(0,c.useEffect)((function(){f()}),[a]);var f=function(){console.log("Fetching Weather Data");try{fetch("https://api.openweathermap.org/data/2.5/weather?lat=14.4506&lon=120.9828&appid=a09978101e59b60cb76ea444b36760cc&units=metric").then((function(s){return s.json()})).then((function(s){g(s.main.humidity)})).catch((function(s){return console.log(s)}))}catch(s){console.error(s)}},y=function(){return o>=76?(x("status-card battFull"),(0,h.jsx)(n.Lr7,{className:"status-icon"})):o>=51&&o<=75?(x("status-card battSafe"),(0,h.jsx)(n.Oj0,{className:"status-icon"})):o>=26&&o<=50?(x("status-card battMid"),(0,h.jsx)(n._ET,{className:"status-icon"})):o>=1&&o<=25?(x("status-card battDanger"),(0,h.jsx)(n.yN4,{className:"status-icon"})):(x("status-card battDanger"),(0,h.jsx)(n.Ftr,{className:"status-icon"}))},F=function(){return 1===parseFloat(a.led_status)?(0,h.jsxs)("div",{className:"status-card lampON",children:[(0,h.jsx)(r.PnF,{className:"status-icon"}),(0,h.jsx)("h2",{children:"ON"}),(0,h.jsx)("h5",{children:"LED Lamp"})]}):0===parseFloat(a.led_status)?(0,h.jsxs)("div",{className:"status-card lampOFF",children:[(0,h.jsx)(r.mYP,{className:"status-icon"}),(0,h.jsx)("h2",{children:"OFF"}),(0,h.jsx)("h5",{children:"LED Lamp"})]}):void 0},b=new Date,w=b.getHours(),L=b.getMinutes(),S=a.time.split(":").map(Number),_=(0,t.Z)(S,2),D=60*(w-_[0])+(L-_[1]),E=Math.floor(D/60),C=D%60,O=" hr ",k=" min ";O=E>1?" hrs ":" hr ",k=C>1?" mins ago.":" min ago.";var A=function(){var s;return b.toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric"})===a.date?(a.pv_power>0||1===a.charging||1===a.led_status)&&(s="Active"):s="Inactive",(0,h.jsxs)("div",{className:"d-flex align-items-center gap-2 my-2",children:[(0,h.jsx)("div",{className:"Active"===s?"sl-status sl-active":"sl-status sl-inactive",children:" - "}),b.toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric"})===a.date?D>60?(0,h.jsx)("h6",{className:"my-0",children:s+" | Last update "+E+O+C+k}):(0,h.jsx)("h6",{className:"my-0",children:s+" | Last update "+D+k}):(0,h.jsx)("h6",{className:"my-0",children:s+" | Last update "+a.date})]})};return(0,h.jsxs)("div",{className:"status-container",children:[(0,h.jsx)("div",{className:"d-flex align-items-center my-0",children:(0,h.jsx)("h3",{className:"my-0",children:"System Status"})}),(0,h.jsx)(A,{}),(0,h.jsx)("div",{className:"status-section",children:(0,h.jsxs)("div",{className:"status-cards-container",children:[(0,h.jsxs)("div",{className:"cards-row d-flex justify-content-center gap-4 my-4",children:[(0,h.jsxs)("div",{className:"status-card",children:[(0,h.jsx)(n.f38,{className:"status-icon"}),(0,h.jsxs)("h2",{children:[parseFloat(a.pv_power),"W"]}),(0,h.jsx)("h5",{children:"Current Power"})]}),(0,h.jsxs)("div",{className:"status-card",children:[(0,h.jsx)(i.XLv,{className:"status-icon"}),(0,h.jsxs)("h2",{children:[function(){var s,a=0;return e.forEach((function(s){a+=s.pv_power})),s=.16667*a,console.log("Energy: "+s),parseFloat(s).toFixed(2)}(),"Wh"]}),(0,h.jsx)("h5",{children:"Energy Yield"})]}),(0,h.jsxs)("div",{className:"status-card",children:[(0,h.jsx)(r.Nwf,{className:"status-icon"}),(0,h.jsx)("h2",{children:"60Wh"}),(0,h.jsx)("h5",{children:"Consumption"})]}),(0,h.jsxs)("div",{className:j,children:[(0,h.jsx)(y,{}),(0,h.jsxs)("h2",{children:[o,"%"]}),(0,h.jsx)("h5",{children:"Battery"})]}),(0,h.jsx)(F,{})]}),(0,h.jsxs)("div",{className:"cards-row d-flex justify-content-between gap-4",children:[(0,h.jsxs)("div",{className:"status-card",children:[(0,h.jsx)(i.jYF,{className:"status-icon"}),(0,h.jsxs)("h2",{children:[parseFloat(a.temp),"\xb0C"]}),(0,h.jsx)("h5",{children:"Ambient Temperature"})]}),(0,h.jsxs)("div",{className:"status-card",children:[(0,h.jsx)(i.aQ_,{className:"status-icon"}),(0,h.jsxs)("h2",{children:[parseFloat(a.lux)," lux"]}),(0,h.jsx)("h5",{children:"Ambient Light"})]}),(0,h.jsxs)("div",{className:"status-card",children:[(0,h.jsx)(l.$2C,{className:"status-icon"}),(0,h.jsxs)("h2",{children:[v,"%"]}),(0,h.jsx)("h5",{children:"Humidity"})]}),(0,h.jsxs)("div",{className:"status-card",children:[(0,h.jsx)(d._5g,{className:"status-icon"}),(0,h.jsxs)("h2",{children:[parseFloat(a.snr),"dB"]}),(0,h.jsx)("h5",{children:"Signal-Noise Ratio"})]}),(0,h.jsxs)("div",{className:"status-card",children:[(0,h.jsx)(n.VyL,{className:"status-icon"}),(0,h.jsxs)("h2",{children:[parseFloat(a.rssi),"dB"]}),(0,h.jsx)("h5",{children:"Signal Strength"})]})]})]})})]})}a.default=(0,c.memo)(o)}}]);
//# sourceMappingURL=67.9a04a3f9.chunk.js.map